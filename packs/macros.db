{"name":"Generate character","permission":{"default":0,"a9Mphu6C9SuGXue4":3},"type":"script","flags":{"core":{"sourceId":"Macro.3zRg0cgONbT8eqmY"}},"scope":"global","command":"let strength = new Roll(\"3d6\").roll().total\nlet dexterity = new Roll(\"3d6\").roll().total\nlet will = new Roll(\"3d6\").roll().total\nlet hp = new Roll(\"1d6\").roll().total\nlet gold = new Roll(\"3d6\").roll().total\n\nlet maleNamesTable = game.tables.entities.find(t => t.name === \"Male Names\")\nlet femaleNamesTable = game.tables.entities.find(t => t.name === \"Female Names\")\n\nconst surname = game.tables.entities.find(t => t.name === \"Surnames\").roll().results[0].text\nconst face = game.tables.entities.find(t => t.name === \"Face\").roll().results[0].text\nconst hair = game.tables.entities.find(t => t.name === \"Hair\").roll().results[0].text\nconst physique = game.tables.entities.find(t => t.name === \"Physique\").roll().results[0].text\nconst misfortune = game.tables.entities.find(t => t.name === \"Misfortunes\").roll().results[0].text\nconst reputation = game.tables.entities.find(t => t.name === \"Reputation\").roll().results[0].text\nconst speech = game.tables.entities.find(t => t.name === \"Speech\").roll().results[0].text\nconst vice = game.tables.entities.find(t => t.name === \"Vice\").roll().results[0].text\nconst virtue = game.tables.entities.find(t => t.name === \"Virtue\").roll().results[0].text\nconst clothing = game.tables.entities.find(t => t.name === \"Clothing\").roll().results[0].text\nconst characterBackground = game.tables.entities.find(t => t.name === \"Background\").roll().results[0].text;\n\nlet genderRoll = new Roll(\"1d6\").roll().total % 2\n\nlet firstName = ''\nif (genderRoll == 1) {\n  firstName += maleNamesTable.roll().results[0].text;\n} else {\n  firstName += femaleNamesTable.roll().results[0].text;\n}\n\nconst characterName = firstName + ' ' + surname\n\nlet biography = `<strong>Hair<strong>: ${hair} <br>\n                 <strong>Face<strong>: ${face}<br>\n                 <strong>Physique<strong>: ${physique}<br>\n                 <strong>Misfortune<strong>: ${misfortune}<br>\n                 <strong>Reputation<strong>: ${reputation}<br>\n                 <strong>Speech<strong>: ${speech}<br>\n                 <strong>Vice<strong>: ${vice}<br>\n                 <strong>Virtue<strong>: ${virtue}<br>\n                 <strong>Clothing<strong>: ${clothing}`\n\nlet actorData = {\n  name: characterName,\n  background: characterBackground,\n  biography: biography,\n  hp: { value: hp, max: hp },\n  gold: gold,\n  \"abilities\": {\n    \"STR\": {\n      \"value\": strength,\n      \"max\": strength\n    },\n    \"DEX\": {\n      \"value\": dexterity,\n      \"max\": dexterity\n    },\n    \"WIL\": {\n      \"value\": will,\n      \"max\": will\n    }\n  },\n}\n\ngame.tables.entities.find(t => t.name === \"Armor\").draw();\ngame.tables.entities.find(t => t.name === \"Helmets and Shields\").draw();\ngame.tables.entities.find(t => t.name === \"Weapons\").draw();\ngame.tables.entities.find(t => t.name === \"Expeditionary Gear\").draw();\ngame.tables.entities.find(t => t.name === \"Tools\").draw();\ngame.tables.entities.find(t => t.name === \"Trinkets\").draw();\ngame.tables.entities.find(t => t.name === \"Bonus Item\").draw();\n\nActor.create({\n  name: characterName,\n  type: \"character\",\n  img: \"icons/svg/mystery-man.svg\",\n  sort: 12000,\n  data: actorData,\n  token: {},\n  items: [],\n  flags: {}\n});","author":"a9Mphu6C9SuGXue4","img":"systems/cairn/img/person.png","actorIds":[],"_id":"KqJ2JhHl2tzKHcio"}
